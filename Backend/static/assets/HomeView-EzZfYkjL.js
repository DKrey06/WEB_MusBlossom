import{_ as b,c as i,a as s,b as u,w as p,F as m,r as f,t as n,d as y,e as w,o as a,f as h,n as v,g as P}from"./index-CkOo5300.js";const C="/assets/CATSOUND-BEWQmUOE.jpg",k=w.create({baseURL:"/api"}),A={name:"HomeView",data(){return{trendingItems:[{id:1,title:"–õ—É—á—à–∏–µ —Ö–∏—Ç—ã 2024",description:"–¢–æ–ø 50 —Ç—Ä–µ–∫–æ–≤ —ç—Ç–æ–≥–æ –≥–æ–¥–∞",type:"–ü–ª–µ–π–ª–∏—Å—Ç",tracks:50,likes:2345,image:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=400&fit=crop"},{id:2,title:"–†—É—Å—Å–∫–∏–π —Ä–æ–∫",description:"–ö–ª–∞—Å—Å–∏–∫–∞ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å",type:"–ü–æ–¥–±–æ—Ä–∫–∞",tracks:25,likes:1890,image:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=400&fit=crop"},{id:3,title:"Lo-Fi –¥–ª—è —Ä–∞–±–æ—Ç—ã",description:"–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–µ –±–∏—Ç—ã",type:"–ü–ª–µ–π–ª–∏—Å—Ç",tracks:30,likes:3120,image:"https://images.unsplash.com/photo-1518609878373-06d740f60d8b?w=400&h=400&fit=crop"}],recentPosts:[],upcomingConcerts:[{id:1,artist:"Miyagi & Andy Panda",date:"15 –¥–µ–∫",location:"–ú–æ—Å–∫–≤–∞",venue:"VTB –ê—Ä–µ–Ω–∞",image:"https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=600&h=300&fit=crop"},{id:2,artist:"Morgenshtern",date:"20 –¥–µ–∫",location:"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",venue:"–°–∏–±—É—Ä –ê—Ä–µ–Ω–∞",image:"https://images.unsplash.com/photo-1501281667305-0d4ebd5b1e35?w=600&h=300&fit=crop"},{id:3,artist:"The Weeknd",date:"25 –¥–µ–∫",location:"–ú–æ—Å–∫–≤–∞",venue:"–õ—É–∂–Ω–∏–∫–∏",image:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=600&h=300&fit=crop"}],loading:!1,error:null,defaultAvatar:"https://i.pravatar.cc/150?img=1"}},async mounted(){await this.loadRecentPosts()},methods:{async loadRecentPosts(){this.loading=!0,this.error=null;try{const o=await k.get("/posts",{params:{per_page:3,page:1}});console.log("API Response:",o.data),o.data.success?(this.recentPosts=o.data.posts||[],console.log("–ó–∞–≥—Ä—É–∂–µ–Ω–æ –ø–æ—Å—Ç–æ–≤:",this.recentPosts.length)):(this.error="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤: "+(o.data.error||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"),console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤:",o.data.error))}catch(o){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ—Å—Ç–æ–≤:",o),o.response?(o.response.status===404?this.error="API endpoint –Ω–µ –Ω–∞–π–¥–µ–Ω":o.response.status===500?this.error="–û—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ":this.error=`–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ${o.response.status}`,console.error("Response data:",o.response.data)):o.request?(this.error="–ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—É—â–µ–Ω –ª–∏ –±—ç–∫–µ–Ω–¥.",console.error("Request error:",o.request)):this.error="–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞: "+o.message}finally{this.loading=!1}},formatTimeAgo(o){if(!o)return"";const t=new Date(o),d=new Date-t,r=Math.floor(d/6e4),l=Math.floor(d/36e5),c=Math.floor(d/864e5);return r<60?`${r} –º–∏–Ω –Ω–∞–∑–∞–¥`:l<24?`${l} —á –Ω–∞–∑–∞–¥`:c<7?`${c} –¥ –Ω–∞–∑–∞–¥`:t.toLocaleDateString("ru-RU")},async likePost(o){try{const t=await k.post(`/posts/${o}/like`,null,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(t.data.success){const _=this.recentPosts.find(d=>d.id===o);_&&(_.likes_count=t.data.likes_count)}}catch(t){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ª–∞–π–∫–µ –ø–æ—Å—Ç–∞:",t),t.response?.status===401&&alert("–î–ª—è –ª–∞–π–∫–∞ –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É")}},goToPost(o){this.$router.push(`/posts/${o}`)},buyTickets(o){console.log("–ü–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞:",o.artist),alert(`–ü–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ ${o.artist} - —Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ`)}}},T={class:"home-view"},R={class:"hero-section"},M={class:"hero-content"},B={class:"hero-actions"},I={class:"trending-section"},V={class:"section-header"},x={class:"trending-grid"},D={class:"trending-badge"},N={class:"trending-content"},L={class:"trending-stats"},S={class:"stat"},U={class:"stat"},$={class:"posts-section"},q={class:"section-header"},E={key:0,class:"loading"},F={key:1,class:"error-message"},H={key:2,class:"no-posts"},z={key:3,class:"posts-list"},O={class:"post-header"},W=["src"],j={class:"post-meta"},Q={class:"author-name"},G={class:"post-time"},J={class:"post-content"},K={key:0,class:"post-tags"},X={class:"post-actions"},Y=["onClick"],Z=["onClick"],ss={class:"concerts-section"},ts={class:"section-header"},es={class:"concerts-slider"},os={class:"concert-date"},ns={class:"concert-info"},is={class:"concert-location"},as={class:"concert-venue"},rs=["onClick"];function ls(o,t,_,d,r,l){const c=y("router-link");return a(),i("div",T,[s("section",R,[s("div",M,[t[3]||(t[3]=s("h1",{class:"hero-title"},"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ MusBlossom",-1)),t[4]||(t[4]=s("p",{class:"hero-subtitle"},"–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö –º–µ–ª–æ–º–∞–Ω–æ–≤",-1)),s("div",B,[u(c,{to:"/posts",class:"btn btn-primary"},{default:p(()=>[...t[1]||(t[1]=[h("–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å",-1)])]),_:1}),u(c,{to:"/register",class:"btn btn-secondary"},{default:p(()=>[...t[2]||(t[2]=[h("–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è",-1)])]),_:1})])]),t[5]||(t[5]=s("div",{class:"hero-visual"},[s("img",{src:C,alt:"–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞"})],-1))]),s("section",I,[s("div",V,[t[7]||(t[7]=s("h2",null,"üî• –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ —Å–µ–π—á–∞—Å",-1)),u(c,{to:"/trending",class:"see-all"},{default:p(()=>[...t[6]||(t[6]=[h("–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ",-1)])]),_:1})]),s("div",x,[(a(!0),i(m,null,f(r.trendingItems,e=>(a(),i("div",{class:"trending-card",key:e.id},[s("div",{class:"trending-image",style:v({backgroundImage:`url(${e.image})`})},[s("div",D,n(e.type),1)],4),s("div",N,[s("h3",null,n(e.title),1),s("p",null,n(e.description),1),s("div",L,[s("span",S,"üéµ "+n(e.tracks)+" —Ç—Ä–µ–∫–æ–≤",1),s("span",U,"‚ù§Ô∏è "+n(e.likes)+" –ª–∞–π–∫–æ–≤",1)])])]))),128))])]),s("section",$,[s("div",q,[t[9]||(t[9]=s("h2",null,"üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—ã",-1)),u(c,{to:"/posts",class:"see-all"},{default:p(()=>[...t[8]||(t[8]=[h("–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ",-1)])]),_:1})]),r.loading?(a(),i("div",E,[...t[10]||(t[10]=[s("div",{class:"spinner"},null,-1),s("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤...",-1)])])):r.error?(a(),i("div",F,[s("p",null,"‚ö†Ô∏è "+n(r.error),1),s("button",{onClick:t[0]||(t[0]=(...e)=>l.loadRecentPosts&&l.loadRecentPosts(...e)),class:"btn btn-primary"},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):r.recentPosts.length===0?(a(),i("div",H,[t[12]||(t[12]=s("p",null,"–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!",-1)),u(c,{to:"/create-post",class:"btn btn-primary"},{default:p(()=>[...t[11]||(t[11]=[h("–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç",-1)])]),_:1})])):(a(),i("div",z,[(a(!0),i(m,null,f(r.recentPosts,e=>(a(),i("div",{class:"post-card",key:e.id},[s("div",O,[s("img",{src:e.author?.avatar||r.defaultAvatar,class:"author-avatar",alt:"Avatar"},null,8,W),s("div",j,[s("span",Q,n(e.author?.username||"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"),1),s("span",G,n(l.formatTimeAgo(e.created_at)),1)])]),s("div",J,[s("h3",null,n(e.title||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"),1),s("p",null,n(e.content?e.content.substring(0,200)+"...":"–ù–µ—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è"),1),e.tags&&e.tags.length?(a(),i("div",K,[(a(!0),i(m,null,f(e.tags,g=>(a(),i("span",{class:"tag",key:g},"#"+n(g),1))),128))])):P("",!0)]),s("div",X,[s("button",{class:"action-btn like-btn",onClick:g=>l.likePost(e.id)}," ‚ù§Ô∏è "+n(e.likes_count||0),9,Y),s("button",{class:"action-btn comment-btn",onClick:g=>l.goToPost(e.id)}," üí¨ "+n(e.comments_count||0),9,Z),t[13]||(t[13]=s("button",{class:"action-btn share-btn"},"‚Ü™Ô∏è –ü–æ–¥–µ–ª–∏—Ç—å—Å—è",-1))])]))),128))]))]),s("section",ss,[s("div",ts,[t[15]||(t[15]=s("h2",null,"üé§ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã",-1)),u(c,{to:"/concerts",class:"see-all"},{default:p(()=>[...t[14]||(t[14]=[h("–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ",-1)])]),_:1})]),s("div",es,[(a(!0),i(m,null,f(r.upcomingConcerts,e=>(a(),i("div",{class:"concert-card",key:e.id},[s("div",{class:"concert-image",style:v({backgroundImage:`url(${e.image})`})},[s("div",os,n(e.date),1)],4),s("div",ns,[s("h3",null,n(e.artist),1),s("p",is,n(e.location),1),s("p",as,n(e.venue),1),s("button",{class:"btn btn-ticket",onClick:g=>l.buyTickets(e)},"–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç—ã",8,rs)])]))),128))])])])}const ds=b(A,[["render",ls],["__scopeId","data-v-2cd5423b"]]);export{ds as default};
