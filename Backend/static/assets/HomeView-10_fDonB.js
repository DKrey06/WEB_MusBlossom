import{_ as k,c as i,a as s,b as u,w as h,F as g,r as f,d as b,o as a,e as p,n as v,t as n,f as y}from"./index-V0CKEUNY.js";const w="/assets/CATSOUND-BEWQmUOE.jpg",T={name:"HomeView",data(){return{trendingItems:[{id:1,title:"–õ—É—á—à–∏–µ —Ö–∏—Ç—ã 2024",description:"–¢–æ–ø 50 —Ç—Ä–µ–∫–æ–≤ —ç—Ç–æ–≥–æ –≥–æ–¥–∞",type:"–ü–ª–µ–π–ª–∏—Å—Ç",tracks:50,likes:2345,image:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=400&fit=crop"},{id:2,title:"–†—É—Å—Å–∫–∏–π —Ä–æ–∫",description:"–ö–ª–∞—Å—Å–∏–∫–∞ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å",type:"–ü–æ–¥–±–æ—Ä–∫–∞",tracks:25,likes:1890,image:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=400&fit=crop"},{id:3,title:"Lo-Fi –¥–ª—è —Ä–∞–±–æ—Ç—ã",description:"–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–µ –±–∏—Ç—ã",type:"–ü–ª–µ–π–ª–∏—Å—Ç",tracks:30,likes:3120,image:"https://images.unsplash.com/photo-1518609878373-06d740f60d8b?w=400&h=400&fit=crop"}],recentPosts:[],upcomingConcerts:[{id:1,artist:"Miyagi & Andy Panda",date:"15 –¥–µ–∫",location:"–ú–æ—Å–∫–≤–∞",venue:"VTB –ê—Ä–µ–Ω–∞",image:"https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=600&h=300&fit=crop"},{id:2,artist:"Morgenshtern",date:"20 –¥–µ–∫",location:"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",venue:"–°–∏–±—É—Ä –ê—Ä–µ–Ω–∞",image:"https://images.unsplash.com/photo-1501281667305-0d4ebd5b1e35?w=600&h=300&fit=crop"},{id:3,artist:"The Weeknd",date:"25 –¥–µ–∫",location:"–ú–æ—Å–∫–≤–∞",venue:"–õ—É–∂–Ω–∏–∫–∏",image:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=600&h=300&fit=crop"}],loading:!1,defaultAvatar:new URL("/assets/Avatar-Dqm_uGCR.jpg",import.meta.url).href}},async mounted(){await this.loadRecentPosts()},methods:{async loadRecentPosts(){this.loading=!0;try{const o=await fetch("http://localhost:5000/api/posts?limit=3",{method:"GET",headers:{"Content-Type":"application/json"}});if(o.ok){const t=await o.json();t.success?this.recentPosts=t.posts||[]:console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤:",t.error)}else console.error("–û—à–∏–±–∫–∞ HTTP:",o.status)}catch(o){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ—Å—Ç–æ–≤:",o)}finally{this.loading=!1}},formatTimeAgo(o){if(!o)return"";const t=new Date(o),d=new Date-t,l=Math.floor(d/6e4),r=Math.floor(d/36e5),c=Math.floor(d/864e5);return l<60?`${l} –º–∏–Ω –Ω–∞–∑–∞–¥`:r<24?`${r} —á –Ω–∞–∑–∞–¥`:c<7?`${c} –¥ –Ω–∞–∑–∞–¥`:t.toLocaleDateString("ru-RU")},async likePost(o){try{const t=localStorage.getItem("access_token"),m=await fetch(`http://localhost:5000/api/posts/${o}/like`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(m.ok){const d=await m.json();if(d.success){const l=this.recentPosts.find(r=>r.id===o);l&&(l.likes_count=d.likes_count)}}}catch(t){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ª–∞–π–∫–µ –ø–æ—Å—Ç–∞:",t)}},goToPost(o){this.$router.push(`/posts/${o}`)},buyTickets(o){console.log("–ü–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞:",o.artist)}}},C={class:"home-view"},P={class:"hero-section"},A={class:"hero-content"},M={class:"hero-actions"},B={class:"trending-section"},D={class:"section-header"},V={class:"trending-grid"},j={class:"trending-badge"},$={class:"trending-content"},x={class:"trending-stats"},I={class:"stat"},N={class:"stat"},R={class:"posts-section"},S={class:"section-header"},E={key:0,class:"loading"},H={key:1,class:"no-posts"},L={key:2,class:"posts-list"},U={class:"post-header"},F=["src"],O={class:"post-meta"},z={class:"author-name"},G={class:"post-time"},W={class:"post-content"},q={key:0,class:"post-tags"},Q={class:"post-actions"},J=["onClick"],K=["onClick"],X={class:"concerts-section"},Y={class:"section-header"},Z={class:"concerts-slider"},ss={class:"concert-date"},ts={class:"concert-info"},es={class:"concert-location"},os={class:"concert-venue"},ns=["onClick"];function is(o,t,m,d,l,r){const c=b("router-link");return a(),i("div",C,[s("section",P,[s("div",A,[t[2]||(t[2]=s("h1",{class:"hero-title"},"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ MusBlossom",-1)),t[3]||(t[3]=s("p",{class:"hero-subtitle"},"–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö –º–µ–ª–æ–º–∞–Ω–æ–≤",-1)),s("div",M,[u(c,{to:"/posts",class:"btn btn-primary"},{default:h(()=>[...t[0]||(t[0]=[p("–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å",-1)])]),_:1}),u(c,{to:"/register",class:"btn btn-secondary"},{default:h(()=>[...t[1]||(t[1]=[p("–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è",-1)])]),_:1})])]),t[4]||(t[4]=s("div",{class:"hero-visual"},[s("img",{src:w,alt:"–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞"})],-1))]),s("section",B,[s("div",D,[t[6]||(t[6]=s("h2",null,"üî• –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ —Å–µ–π—á–∞—Å",-1)),u(c,{to:"/trending",class:"see-all"},{default:h(()=>[...t[5]||(t[5]=[p("–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ",-1)])]),_:1})]),s("div",V,[(a(!0),i(g,null,f(l.trendingItems,e=>(a(),i("div",{class:"trending-card",key:e.id},[s("div",{class:"trending-image",style:v({backgroundImage:`url(${e.image})`})},[s("div",j,n(e.type),1)],4),s("div",$,[s("h3",null,n(e.title),1),s("p",null,n(e.description),1),s("div",x,[s("span",I,"üéµ "+n(e.tracks)+" —Ç—Ä–µ–∫–æ–≤",1),s("span",N,"‚ù§Ô∏è "+n(e.likes)+" –ª–∞–π–∫–æ–≤",1)])])]))),128))])]),s("section",R,[s("div",S,[t[8]||(t[8]=s("h2",null,"üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—ã",-1)),u(c,{to:"/posts",class:"see-all"},{default:h(()=>[...t[7]||(t[7]=[p("–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ",-1)])]),_:1})]),l.loading?(a(),i("div",E,[...t[9]||(t[9]=[s("div",{class:"spinner"},null,-1),s("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤...",-1)])])):l.recentPosts.length===0?(a(),i("div",H,[t[11]||(t[11]=s("p",null,"–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!",-1)),u(c,{to:"/create-post",class:"btn btn-primary"},{default:h(()=>[...t[10]||(t[10]=[p("–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç",-1)])]),_:1})])):(a(),i("div",L,[(a(!0),i(g,null,f(l.recentPosts,e=>(a(),i("div",{class:"post-card",key:e.id},[s("div",U,[s("img",{src:e.author?.avatar||l.defaultAvatar,class:"author-avatar",alt:"Avatar"},null,8,F),s("div",O,[s("span",z,n(e.author?.username||"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"),1),s("span",G,n(r.formatTimeAgo(e.created_at)),1)])]),s("div",W,[s("h3",null,n(e.title||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"),1),s("p",null,n(e.content?e.content.substring(0,200)+"...":"–ù–µ—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è"),1),e.tags&&e.tags.length?(a(),i("div",q,[(a(!0),i(g,null,f(e.tags,_=>(a(),i("span",{class:"tag",key:_},"#"+n(_),1))),128))])):y("",!0)]),s("div",Q,[s("button",{class:"action-btn like-btn",onClick:_=>r.likePost(e.id)}," ‚ù§Ô∏è "+n(e.likes_count||0),9,J),s("button",{class:"action-btn comment-btn",onClick:_=>r.goToPost(e.id)}," üí¨ "+n(e.comments_count||0),9,K),t[12]||(t[12]=s("button",{class:"action-btn share-btn"},"‚Ü™Ô∏è –ü–æ–¥–µ–ª–∏—Ç—å—Å—è",-1))])]))),128))]))]),s("section",X,[s("div",Y,[t[14]||(t[14]=s("h2",null,"üé§ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã",-1)),u(c,{to:"/concerts",class:"see-all"},{default:h(()=>[...t[13]||(t[13]=[p("–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ",-1)])]),_:1})]),s("div",Z,[(a(!0),i(g,null,f(l.upcomingConcerts,e=>(a(),i("div",{class:"concert-card",key:e.id},[s("div",{class:"concert-image",style:v({backgroundImage:`url(${e.image})`})},[s("div",ss,n(e.date),1)],4),s("div",ts,[s("h3",null,n(e.artist),1),s("p",es,n(e.location),1),s("p",os,n(e.venue),1),s("button",{class:"btn btn-ticket",onClick:_=>r.buyTickets(e)},"–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç—ã",8,ns)])]))),128))])])])}const ls=k(T,[["render",is],["__scopeId","data-v-19afcd09"]]);export{ls as default};
