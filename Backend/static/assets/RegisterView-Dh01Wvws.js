import{_ as x,c as n,a as r,g as V,h as m,v as g,k as w,t,f as u,l as p,e as P,b as S,w as R,u as U,m as q,d as M,p as h,i as c,j as N,o as f}from"./index-V0CKEUNY.js";const A={name:"RegisterView",setup(){const _=N(),o=U(),a=c({username:"",email:"",password:"",confirmPassword:"",bio:""}),s=c(!1),b=c(!1),i=c({}),v=h(()=>o.isLoading),e=h(()=>{const l=a.value.password;if(!l)return"Нет";let d=0;return l.length>=8&&d++,/[A-Z]/.test(l)&&d++,/[0-9]/.test(l)&&d++,/[^A-Za-z0-9]/.test(l)&&d++,["Слабый","Средний","Хороший","Надёжный"][Math.min(d-1,3)]||"Слабый"}),y=h(()=>({weak:e.value==="Слабый",medium:e.value==="Средний",good:e.value==="Хороший",strong:e.value==="Надёжный"})),k=()=>(i.value={},a.value.username?a.value.username.length<3&&(i.value.username="Минимум 3 символа"):i.value.username="Имя пользователя обязательно",a.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.value.email)||(i.value.email="Некорректный email"):i.value.email="Email обязателен",a.value.password?a.value.password.length<6&&(i.value.password="Минимум 6 символов"):i.value.password="Пароль обязателен",a.value.password!==a.value.confirmPassword&&(i.value.confirmPassword="Пароли не совпадают"),Object.keys(i.value).length===0),C=async()=>{if(!k())return;(await o.register(a.value.username,a.value.email,a.value.password,a.value.bio)).success&&(console.log("Registration successful, redirecting..."),_.push("/"))};return q(()=>{o.error&&(o.error=null)}),{form:a,showPassword:s,showConfirmPassword:b,errors:i,loading:v,authStore:o,passwordStrength:e,passwordStrengthClass:y,handleRegister:C}}},B={class:"register-view"},D={class:"register-container"},E={class:"form-row"},j={class:"form-group"},z=["disabled"],T={key:0,class:"error-message"},Z={class:"form-group"},F=["disabled"],I={key:0,class:"error-message"},L={class:"form-row"},O={class:"form-group"},G={class:"password-input-wrapper"},H=["type","disabled"],J=["title"],K={class:"form-group"},Q={class:"password-input-wrapper"},W=["type","disabled"],X=["title"],Y={key:0,class:"error-message"},$={class:"form-group"},ss=["disabled"],os={class:"char-counter"},rs={class:"form-actions"},es=["disabled"],as={class:"login-link"},is={key:0,class:"error-alert"};function ts(_,o,a,s,b,i){const v=M("router-link");return f(),n("div",B,[r("div",D,[o[15]||(o[15]=r("div",{class:"register-header"},[r("h1",null,"Создать аккаунт"),r("p",null,"Присоединяйся к музыкальному сообществу")],-1)),r("form",{onSubmit:o[7]||(o[7]=V((...e)=>s.handleRegister&&s.handleRegister(...e),["prevent"])),class:"register-form"},[r("div",E,[r("div",j,[o[8]||(o[8]=r("label",{for:"username"},"Имя пользователя *",-1)),m(r("input",{type:"text",id:"username","onUpdate:modelValue":o[0]||(o[0]=e=>s.form.username=e),placeholder:"musiclover",required:"",disabled:s.loading,class:w({error:s.errors.username})},null,10,z),[[g,s.form.username]]),s.errors.username?(f(),n("div",T,t(s.errors.username),1)):u("",!0)]),r("div",Z,[o[9]||(o[9]=r("label",{for:"email"},"Email *",-1)),m(r("input",{type:"email",id:"email","onUpdate:modelValue":o[1]||(o[1]=e=>s.form.email=e),placeholder:"your@email.com",required:"",disabled:s.loading,class:w({error:s.errors.email})},null,10,F),[[g,s.form.email]]),s.errors.email?(f(),n("div",I,t(s.errors.email),1)):u("",!0)])]),r("div",L,[r("div",O,[o[10]||(o[10]=r("label",{for:"password"},"Пароль *",-1)),r("div",G,[m(r("input",{type:s.showPassword?"text":"password",id:"password","onUpdate:modelValue":o[2]||(o[2]=e=>s.form.password=e),placeholder:"••••••••",required:"",disabled:s.loading,class:w({error:s.errors.password})},null,10,H),[[p,s.form.password]]),r("button",{type:"button",class:"toggle-password",onClick:o[3]||(o[3]=e=>s.showPassword=!s.showPassword),title:s.showPassword?"Скрыть пароль":"Показать пароль"},t(s.showPassword?"Скрыть":"Показать"),9,J)]),r("div",{class:w(["password-strength",s.passwordStrengthClass])}," Сложность: "+t(s.passwordStrength),3)]),r("div",K,[o[11]||(o[11]=r("label",{for:"confirmPassword"},"Подтверждение пароля *",-1)),r("div",Q,[m(r("input",{type:s.showConfirmPassword?"text":"password",id:"confirmPassword","onUpdate:modelValue":o[4]||(o[4]=e=>s.form.confirmPassword=e),placeholder:"••••••••",required:"",disabled:s.loading,class:w({error:s.errors.confirmPassword})},null,10,W),[[p,s.form.confirmPassword]]),r("button",{type:"button",class:"toggle-password",onClick:o[5]||(o[5]=e=>s.showConfirmPassword=!s.showConfirmPassword),title:s.showConfirmPassword?"Скрыть пароль":"Показать пароль"},t(s.showConfirmPassword?"Скрыть":"Показать"),9,X)]),s.errors.confirmPassword?(f(),n("div",Y,t(s.errors.confirmPassword),1)):u("",!0)])]),r("div",$,[o[12]||(o[12]=r("label",{for:"bio"},"О себе",-1)),m(r("textarea",{id:"bio","onUpdate:modelValue":o[6]||(o[6]=e=>s.form.bio=e),placeholder:"Расскажи о своих музыкальных предпочтениях...",rows:"3",maxlength:"200",disabled:s.loading},null,8,ss),[[g,s.form.bio]]),r("div",os,t(s.form.bio.length)+"/200",1)]),r("div",rs,[r("button",{type:"submit",class:"btn-register",disabled:s.loading},t(s.loading?"Регистрация...":"Создать аккаунт"),9,es),r("div",as,[o[14]||(o[14]=P(" Уже есть аккаунт? ",-1)),S(v,{to:"/login"},{default:R(()=>[...o[13]||(o[13]=[P("Войти",-1)])]),_:1})])]),s.authStore.error?(f(),n("div",is,t(s.authStore.error),1)):u("",!0)],32)])])}const ns=x(A,[["render",ts],["__scopeId","data-v-2f25dd8c"]]);export{ns as default};
