import{_ as S,c as r,a as t,h as d,v as T,x as w,F as p,r as h,q as g,z as C,A as y,f as u,t as a,d as q,o as n,k as H,e as b,b as k,w as _,n as R}from"./index-V0CKEUNY.js";const x={name:"SearchView",data(){return{query:"",activeTab:"all",tabs:[{id:"all",label:"–í—Å–µ"},{id:"users",label:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"},{id:"posts",label:"–ü–æ—Å—Ç—ã"},{id:"playlists",label:"–ü–ª–µ–π–ª–∏—Å—Ç—ã"},{id:"tracks",label:"–¢—Ä–µ–∫–∏"}],showAdvanced:!1,loading:!1,sortBy:"relevance",timeRange:"all",filters:{contentTypes:{posts:!0,users:!0,playlists:!0,tracks:!0}},results:{users:[],posts:[],playlists:[],tracks:[]},searchHistory:[],relatedTags:["–†–æ–∫","–ü–æ–ø","–•–∏–ø-—Ö–æ–ø","2023","–ù–æ–≤–∏–Ω–∫–∏","–ö–ª–∞—Å—Å–∏–∫–∞","–î–∂–∞–∑","–ò–Ω–¥–∏"],defaultAvatar:"https://i.pravatar.cc/150",defaultPlaylistCover:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&h=400&fit=crop",defaultTrackCover:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=800&h=800&fit=crop"}},computed:{hasResults(){return Object.values(this.results).some(o=>o.length>0)},allResults(){return[...this.results.users,...this.results.posts,...this.results.playlists,...this.results.tracks]}},mounted(){this.loadSearchHistory();const o=this.$route.query.q;o&&(this.query=o,this.performSearch()),this.$refs.searchInput?.focus()},methods:{async performSearch(){if(this.query.trim()){this.loading=!0;try{this.saveToHistory();const[o,s,v]=await Promise.all([this.searchUsers(),this.searchPosts(),this.searchPlaylists()]);if(this.results={users:o,posts:s,playlists:v,tracks:this.searchTracks()},this.activeTab==="all"&&!this.allResults.length){for(const c of this.tabs.slice(1))if(this.results[c.id]?.length){this.activeTab=c.id;break}}}catch(o){console.error("Search error:",o)}finally{this.loading=!1}}},async searchUsers(){try{const s=await(await fetch(`http://localhost:5000/api/search?q=${encodeURIComponent(this.query)}`)).json();return s.success?s.results.users||[]:[]}catch{return this.getMockUsers()}},async searchPosts(){try{const s=await(await fetch(`http://localhost:5000/api/posts?q=${encodeURIComponent(this.query)}`)).json();return s.success?s.posts||[]:[]}catch{return this.getMockPosts()}},async searchPlaylists(){try{const s=await(await fetch(`http://localhost:5000/api/playlists?q=${encodeURIComponent(this.query)}`)).json();return s.success?s.playlists||[]:[]}catch{return this.getMockPlaylists()}},searchTracks(){return[{id:1,title:"Blinding Lights",artist:"The Weeknd",album:"After Hours",cover:"https://i.scdn.co/image/ab67616d00001e02/86a0f12c8d1c65b6e6c8b1a0f2c5e8b1d5b3a8f2",duration:2e5,plays_count:245e4},{id:2,title:"Levitating",artist:"Dua Lipa",album:"Future Nostalgia",cover:"https://i.scdn.co/image/ab67616d00001e02/f2b8b5b5f5b5f5b5f5b5f5b5f5b5f5b5f5b5f5b5",duration:203e3,plays_count:198e4}]},getMockUsers(){return[{id:1,username:"musiclover",avatar:"https://i.pravatar.cc/150?img=1",bio:"–õ—é–±–∏—Ç–µ–ª—å –º—É–∑—ã–∫–∏ –≤—Å–µ—Ö –∂–∞–Ω—Ä–æ–≤",posts_count:42,followers_count:128,is_following:!1},{id:2,username:"rockfan",avatar:"https://i.pravatar.cc/150?img=2",bio:"–†–æ–∫ –Ω–∞–≤—Å–µ–≥–¥–∞!",posts_count:18,followers_count:56,is_following:!0}]},getMockPosts(){return[{id:1,title:"–ú–æ–∏ –º—ã—Å–ª–∏ –æ –Ω–æ–≤–æ–º –∞–ª—å–±–æ–º–µ",content:"–ù–µ–¥–∞–≤–Ω–æ –≤—ã—à–µ–ª –Ω–æ–≤—ã–π –∞–ª—å–±–æ–º, –∏ —è —Ö–æ—á—É –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏...",author:{username:"musiclover",avatar:"https://i.pravatar.cc/150?img=1"},created_at:"2023-10-15T10:30:00",likes_count:24,comments_count:8}]},getMockPlaylists(){return[{id:1,name:"–õ—É—á—à–∏–µ —Ö–∏—Ç—ã 2023",description:"–°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç—Ä–µ–∫–∏ —ç—Ç–æ–≥–æ –≥–æ–¥–∞",cover:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&h=400&fit=crop",tracks_count:25,creator:{username:"musiclover",avatar:"https://i.pravatar.cc/150?img=1"},plays_count:1245}]},changeTab(o){this.activeTab=o},getCount(o){return o==="all"?this.allResults.length:this.results[o]?.length||0},setSuggestion(o){this.query=o,this.performSearch()},setQuery(o){this.query=o,this.performSearch()},addTagToSearch(o){this.query.includes(o)||(this.query=this.query?`${this.query} ${o}`:o,this.performSearch())},getTagSize(o){return 14+({–†–æ–∫:3,–ü–æ–ø:3,"–•–∏–ø-—Ö–æ–ø":2,2023:2,–ù–æ–≤–∏–Ω–∫–∏:1,–ö–ª–∞—Å—Å–∏–∫–∞:1,–î–∂–∞–∑:1,–ò–Ω–¥–∏:1}[o]||0)},formatTime(o){const s=new Date(o),c=Math.floor((new Date-s)/(1e3*60));return c<60?`${c} –º–∏–Ω –Ω–∞–∑–∞–¥`:c<1440?`${Math.floor(c/60)} —á –Ω–∞–∑–∞–¥`:s.toLocaleDateString("ru-RU")},formatDuration(o){const s=Math.floor(o/6e4),v=(o%6e4/1e3).toFixed(0);return`${s}:${v.padStart(2,"0")}`},saveToHistory(){const o={id:Date.now(),query:this.query,date:new Date().toISOString()};this.searchHistory.unshift(o),this.searchHistory.length>10&&(this.searchHistory=this.searchHistory.slice(0,10)),localStorage.setItem("searchHistory",JSON.stringify(this.searchHistory))},loadSearchHistory(){const o=localStorage.getItem("searchHistory");o&&(this.searchHistory=JSON.parse(o))},clearHistory(){confirm("–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ–∏—Å–∫–∞?")&&(this.searchHistory=[],localStorage.removeItem("searchHistory"))}}},U={class:"search-view"},V={class:"search-header"},D={class:"search-box-large"},M={class:"search-container"},P={class:"search-filters"},A={class:"filter-tabs"},I=["onClick"],B={key:0,class:"tab-count"},z={key:0,class:"advanced-filters"},N={class:"filter-group"},L={class:"filter-group"},j={class:"filter-group"},F={class:"checkbox-group"},O={class:"search-results"},W={key:0,class:"loading"},J={key:1,class:"results-content"},K={key:0,class:"results-section"},Q={class:"users-grid"},E=["src","alt"],G={class:"user-info"},X={class:"user-name"},Y={key:0,class:"user-bio"},Z={class:"user-stats"},$={key:0,class:"follow-btn"},ss={key:1,class:"results-section"},ts={class:"posts-list"},es={class:"post-header"},ls=["src","alt"],os={class:"post-meta"},rs={class:"author-name"},ns={class:"post-time"},is={class:"post-title"},as={class:"post-content"},us={class:"post-stats"},cs={key:2,class:"results-section"},ds={class:"playlists-grid"},ps={class:"playlist-cover"},hs=["src","alt"],vs={class:"track-count"},ys={class:"playlist-info"},fs={class:"playlist-description"},ms={class:"playlist-creator"},gs=["src","alt"],bs={class:"playlist-stats"},ks={key:3,class:"results-section"},_s={class:"tracks-list"},Ss=["src","alt"],Ts={class:"track-info"},ws={class:"track-artist"},Cs={class:"track-album"},qs={class:"track-meta"},Hs={key:2,class:"no-results"},Rs={class:"suggestions"},xs={class:"suggestion-tags"},Us={key:3,class:"empty-state"},Vs={class:"popular-searches"},Ds={class:"popular-tags"},Ms={key:0,class:"search-sidebar"},Ps={class:"sidebar-section"},As={class:"tags-cloud"},Is=["onClick"],Bs={class:"sidebar-section"},zs={class:"search-history"},Ns=["onClick"];function Ls(o,s,v,c,l,i){const f=q("router-link");return n(),r("div",U,[t("div",V,[t("div",D,[d(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>l.query=e),placeholder:"–ü–æ–∏—Å–∫ –º—É–∑—ã–∫–∏, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, –ø–æ—Å—Ç–æ–≤, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...",onKeyup:s[1]||(s[1]=w((...e)=>i.performSearch&&i.performSearch(...e),["enter"])),ref:"searchInput"},null,544),[[T,l.query]]),t("button",{class:"search-btn",onClick:s[2]||(s[2]=(...e)=>i.performSearch&&i.performSearch(...e))},[...s[20]||(s[20]=[t("span",null,"–ü–æ–∏—Å–∫",-1)])])])]),t("div",M,[t("div",P,[t("div",A,[(n(!0),r(p,null,h(l.tabs,e=>(n(),r("button",{key:e.id,class:H({active:l.activeTab===e.id}),onClick:m=>i.changeTab(e.id)},[b(a(e.label)+" ",1),i.getCount(e.id)>0?(n(),r("span",B,a(i.getCount(e.id)),1)):u("",!0)],10,I))),128))]),l.showAdvanced?(n(),r("div",z,[t("div",N,[s[22]||(s[22]=t("label",null,"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ:",-1)),d(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>l.sortBy=e)},[...s[21]||(s[21]=[t("option",{value:"relevance"},"–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏",-1),t("option",{value:"popularity"},"–ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏",-1),t("option",{value:"newest"},"–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ",-1),t("option",{value:"oldest"},"–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ",-1)])],512),[[g,l.sortBy]])]),t("div",L,[s[24]||(s[24]=t("label",null,"–ü–µ—Ä–∏–æ–¥:",-1)),d(t("select",{"onUpdate:modelValue":s[4]||(s[4]=e=>l.timeRange=e)},[...s[23]||(s[23]=[C('<option value="all" data-v-239dc8ba>–ó–∞ –≤—Å–µ –≤—Ä–µ–º—è</option><option value="day" data-v-239dc8ba>–ó–∞ –¥–µ–Ω—å</option><option value="week" data-v-239dc8ba>–ó–∞ –Ω–µ–¥–µ–ª—é</option><option value="month" data-v-239dc8ba>–ó–∞ –º–µ—Å—è—Ü</option><option value="year" data-v-239dc8ba>–ó–∞ –≥–æ–¥</option>',5)])],512),[[g,l.timeRange]])]),t("div",j,[s[29]||(s[29]=t("label",null,"–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞:",-1)),t("div",F,[t("label",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=e=>l.filters.contentTypes.posts=e)},null,512),[[y,l.filters.contentTypes.posts]]),s[25]||(s[25]=t("span",null,"–ü–æ—Å—Ç—ã",-1))]),t("label",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=e=>l.filters.contentTypes.users=e)},null,512),[[y,l.filters.contentTypes.users]]),s[26]||(s[26]=t("span",null,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",-1))]),t("label",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=e=>l.filters.contentTypes.playlists=e)},null,512),[[y,l.filters.contentTypes.playlists]]),s[27]||(s[27]=t("span",null,"–ü–ª–µ–π–ª–∏—Å—Ç—ã",-1))]),t("label",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[8]||(s[8]=e=>l.filters.contentTypes.tracks=e)},null,512),[[y,l.filters.contentTypes.tracks]]),s[28]||(s[28]=t("span",null,"–¢—Ä–µ–∫–∏",-1))])])])])):u("",!0),t("button",{class:"toggle-filters",onClick:s[9]||(s[9]=e=>l.showAdvanced=!l.showAdvanced)},a(l.showAdvanced?"–°–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã":"–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã"),1)]),t("div",O,[l.loading?(n(),r("div",W,[...s[30]||(s[30]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ò–¥–µ—Ç –ø–æ–∏—Å–∫...",-1)])])):i.hasResults?(n(),r("div",J,[l.activeTab==="users"&&l.results.users.length?(n(),r("div",K,[s[31]||(s[31]=t("h2",null,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",-1)),t("div",Q,[(n(!0),r(p,null,h(l.results.users,e=>(n(),r("div",{key:e.id,class:"user-card"},[k(f,{to:`/profile/${e.username}`,class:"user-link"},{default:_(()=>[t("img",{src:e.avatar||l.defaultAvatar,alt:e.username,class:"user-avatar"},null,8,E),t("div",G,[t("h3",X,a(e.username),1),e.bio?(n(),r("p",Y,a(e.bio),1)):u("",!0),t("div",Z,[t("span",null,a(e.posts_count)+" –ø–æ—Å—Ç–æ–≤",1),t("span",null,a(e.followers_count)+" –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤",1)])])]),_:2},1032,["to"]),e.is_following?u("",!0):(n(),r("button",$,"–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è"))]))),128))])])):u("",!0),l.activeTab==="posts"&&l.results.posts.length?(n(),r("div",ss,[s[33]||(s[33]=t("h2",null,"–ü–æ—Å—Ç—ã",-1)),t("div",ts,[(n(!0),r(p,null,h(l.results.posts,e=>(n(),r("div",{key:e.id,class:"post-card"},[t("div",es,[t("img",{src:e.author.avatar||l.defaultAvatar,alt:e.author.username,class:"author-avatar"},null,8,ls),t("div",os,[t("span",rs,a(e.author.username),1),t("span",ns,a(i.formatTime(e.created_at)),1)])]),t("h3",is,a(e.title),1),t("p",as,a(e.content),1),t("div",us,[t("span",null,a(e.likes_count)+" –ª–∞–π–∫–æ–≤",1),t("span",null,a(e.comments_count)+" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",1)]),k(f,{to:`/posts/${e.id}`,class:"read-more"},{default:_(()=>[...s[32]||(s[32]=[b("–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ ‚Üí",-1)])]),_:1},8,["to"])]))),128))])])):u("",!0),l.activeTab==="playlists"&&l.results.playlists.length?(n(),r("div",cs,[s[34]||(s[34]=t("h2",null,"–ü–ª–µ–π–ª–∏—Å—Ç—ã",-1)),t("div",ds,[(n(!0),r(p,null,h(l.results.playlists,e=>(n(),r("div",{key:e.id,class:"playlist-card"},[t("div",ps,[t("img",{src:e.cover||l.defaultPlaylistCover,alt:e.name},null,8,hs),t("div",vs,a(e.tracks_count)+" —Ç—Ä–µ–∫–æ–≤",1)]),t("div",ys,[t("h3",null,a(e.name),1),t("p",fs,a(e.description),1),t("div",ms,[t("img",{src:e.creator.avatar||l.defaultAvatar,alt:e.creator.username},null,8,gs),t("span",null,a(e.creator.username),1)]),t("div",bs,[t("span",null,a(e.plays_count)+" –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–π",1)])])]))),128))])])):u("",!0),l.activeTab==="tracks"&&l.results.tracks.length?(n(),r("div",ks,[s[36]||(s[36]=t("h2",null,"–¢—Ä–µ–∫–∏",-1)),t("div",_s,[(n(!0),r(p,null,h(l.results.tracks,e=>(n(),r("div",{key:e.id,class:"track-card"},[t("img",{src:e.cover||l.defaultTrackCover,alt:e.title,class:"track-cover"},null,8,Ss),t("div",Ts,[t("h3",null,a(e.title),1),t("p",ws,a(e.artist),1),t("p",Cs,a(e.album),1),t("div",qs,[t("span",null,a(i.formatDuration(e.duration)),1),t("span",null,a(e.plays_count)+" –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–π",1)])]),s[35]||(s[35]=t("button",{class:"play-btn"},"–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏",-1))]))),128))])])):u("",!0)])):l.query&&!l.loading?(n(),r("div",Hs,[s[38]||(s[38]=t("div",{class:"no-results-icon"},"üîç",-1)),s[39]||(s[39]=t("h3",null,"–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ",-1)),s[40]||(s[40]=t("p",null,"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞",-1)),t("div",Rs,[s[37]||(s[37]=t("p",null,"–í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –∏—Å–∫–∞–ª–∏:",-1)),t("div",xs,[t("span",{onClick:s[10]||(s[10]=e=>i.setSuggestion("The Weeknd"))},"The Weeknd"),t("span",{onClick:s[11]||(s[11]=e=>i.setSuggestion("Dua Lipa"))},"Dua Lipa"),t("span",{onClick:s[12]||(s[12]=e=>i.setSuggestion("Bohemian Rhapsody"))},"Bohemian Rhapsody"),t("span",{onClick:s[13]||(s[13]=e=>i.setSuggestion("–†–æ–∫ –º—É–∑—ã–∫–∞"))},"–†–æ–∫ –º—É–∑—ã–∫–∞")])])])):(n(),r("div",Us,[s[42]||(s[42]=t("div",{class:"empty-icon"},"üîç",-1)),s[43]||(s[43]=t("h3",null,"–ù–∞—á–Ω–∏—Ç–µ –ø–æ–∏—Å–∫",-1)),s[44]||(s[44]=t("p",null," –í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –≤ –ø–æ–ª–µ –≤—ã—à–µ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –º—É–∑—ã–∫—É, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, –ø–æ—Å—Ç—ã –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ",-1)),t("div",Vs,[s[41]||(s[41]=t("h4",null,"–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:",-1)),t("div",Ds,[t("span",{onClick:s[14]||(s[14]=e=>i.setSuggestion("–ü–æ–ø"))},"–ü–æ–ø"),t("span",{onClick:s[15]||(s[15]=e=>i.setSuggestion("–†–æ–∫"))},"–†–æ–∫"),t("span",{onClick:s[16]||(s[16]=e=>i.setSuggestion("–•–∏–ø-—Ö–æ–ø"))},"–•–∏–ø-—Ö–æ–ø"),t("span",{onClick:s[17]||(s[17]=e=>i.setSuggestion("–î–∂–∞–∑"))},"–î–∂–∞–∑"),t("span",{onClick:s[18]||(s[18]=e=>i.setSuggestion("–ö–ª–∞—Å—Å–∏–∫–∞"))},"–ö–ª–∞—Å—Å–∏–∫–∞")])])]))]),i.hasResults?(n(),r("div",Ms,[t("div",Ps,[s[45]||(s[45]=t("h3",null,"–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–≥–∏",-1)),t("div",As,[(n(!0),r(p,null,h(l.relatedTags,e=>(n(),r("span",{key:e,onClick:m=>i.addTagToSearch(e),class:"tag",style:R({fontSize:`${i.getTagSize(e)}px`})},a(e),13,Is))),128))])]),t("div",Bs,[s[46]||(s[46]=t("h3",null,"–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞",-1)),t("div",zs,[(n(!0),r(p,null,h(l.searchHistory,e=>(n(),r("div",{key:e.id,class:"history-item",onClick:m=>i.setQuery(e.query)},[t("span",null,a(e.query),1),t("small",null,a(i.formatTime(e.date)),1)],8,Ns))),128))]),t("button",{class:"clear-history",onClick:s[19]||(s[19]=(...e)=>i.clearHistory&&i.clearHistory(...e))},"–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é")])])):u("",!0)])])}const Fs=S(x,[["render",Ls],["__scopeId","data-v-239dc8ba"]]);export{Fs as default};
