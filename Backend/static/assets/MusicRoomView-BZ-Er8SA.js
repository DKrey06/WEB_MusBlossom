import{_,c as n,a as s,t as r,F as m,r as h,i as v,v as g,y as T,n as f,g as u,o as l,l as k}from"./index-CkOo5300.js";const y={name:"MusicRoomView",data(){return{room:{id:this.$route.params.roomId,name:"Ð’ÐµÑ‡ÐµÑ€Ð¸Ð½ÐºÐ° #1",description:"Ð¡Ð»ÑƒÑˆÐ°ÐµÐ¼ Ð½Ð¾Ð²Ð¸Ð½ÐºÐ¸ Ð¸ ÐºÐ»Ð°ÑÑÐ¸ÐºÑƒ",listeners:42,participants:[{id:1,username:"ÐÐ»ÐµÐºÑÐµÐ¹",avatar:"https://i.pravatar.cc/150?img=1",role:"host",isSpeaking:!0},{id:2,username:"ÐœÐ°Ñ€Ð¸Ñ",avatar:"https://i.pravatar.cc/150?img=5",role:"speaker",isSpeaking:!0},{id:3,username:"Ð”Ð¼Ð¸Ñ‚Ñ€Ð¸Ð¹",avatar:"https://i.pravatar.cc/150?img=8",role:"listener",isSpeaking:!1},{id:4,username:"ÐÐ½Ð½Ð°",avatar:"https://i.pravatar.cc/150?img=4",role:"listener",isSpeaking:!1}],queue:[{id:1,title:"Blinding Lights",artist:"The Weeknd",cover:"https://i.scdn.co/image/ab67616d00001e02/86a0f12c8d1c65b6e6c8b1a0f2c5e8b1d5b3a8f2",duration:200,votes:15,addedBy:1},{id:2,title:"Levitating",artist:"Dua Lipa",cover:"https://i.scdn.co/image/ab67616d00001e02/f2b8b5b5f5b5f5b5f5b5f5b5f5b5f5b5f5b5f5b5",duration:203,votes:12,addedBy:2},{id:3,title:"Stay",artist:"The Kid LAROI, Justin Bieber",cover:"https://i.scdn.co/image/ab67616d00001e02/6e0b5b8b9c5b8b8b8b8b8b8b8b8b8b8b8b8b8b8",duration:141,votes:8,addedBy:3}],stats:{totalTracks:156,totalTime:"24:30",topGenre:"ÐŸÐ¾Ð¿",activeUsers:28}},currentTrack:{id:1,title:"Blinding Lights",artist:"The Weeknd",cover:"https://i.scdn.co/image/ab67616d00001e02/86a0f12c8d1c65b6e6c8b1a0f2c5e8b1d5b3a8f2",duration:200},messages:[{id:1,user:{id:1,username:"ÐÐ»ÐµÐºÑÐµÐ¹",avatar:"https://i.pravatar.cc/150?img=1"},text:"ÐŸÑ€Ð¸Ð²ÐµÑ‚ Ð²ÑÐµÐ¼! ÐšÐ°Ðº Ð²Ð°Ð¼ ÑÑ‚Ð¾Ñ‚ Ñ‚Ñ€ÐµÐº?",time:"19:30"},{id:2,user:{id:2,username:"ÐœÐ°Ñ€Ð¸Ñ",avatar:"https://i.pravatar.cc/150?img=5"},text:"ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€! Ð›ÑŽÐ±Ð»ÑŽ The Weeknd",time:"19:31"},{id:3,user:{id:3,username:"Ð”Ð¼Ð¸Ñ‚Ñ€Ð¸Ð¹",avatar:"https://i.pravatar.cc/150?img=8"},text:"ÐœÐ¾Ð¶ÐµÑ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ñ‚Ñ€ÐµÐº Ð±ÑƒÐ´ÐµÑ‚ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¸Ð· 80-Ñ…?",time:"19:32"}],newMessage:"",isPlaying:!0,isLiked:!1,isMuted:!1,currentTime:45,progress:22.5,volume:80,showAddTrackModal:!1,searchTrack:"",searchResults:[],currentUser:{id:1,username:"ÐÐ»ÐµÐºÑÐµÐ¹",avatar:"https://i.pravatar.cc/150?img=1",role:"host"},audioPlayer:null}},computed:{formattedListeners(){return this.room.listeners.toLocaleString()}},mounted(){this.setupAudioPlayer(),this.scrollToBottom(),this.startRoomUpdates()},beforeUnmount(){this.cleanupRoom()},methods:{setupAudioPlayer(){this.audioPlayer={play:()=>this.isPlaying=!0,pause:()=>this.isPlaying=!1,currentTime:45,duration:200}},togglePlay(){this.isPlaying=!this.isPlaying,this.isPlaying?this.audioPlayer?.play():this.audioPlayer?.pause()},prevTrack(){if(this.room.queue.length>1){const a=this.room.queue[1];this.currentTrack=a,this.room.queue=[a,...this.room.queue.slice(2)],this.resetProgress()}},nextTrack(){if(this.room.queue.length>1){const a=this.room.queue[1];this.currentTrack=a,this.room.queue=this.room.queue.slice(1),this.resetProgress()}},resetProgress(){this.currentTime=0,this.progress=0,this.updateProgress()},updateProgress(){this.isPlaying&&(this.currentTime+=1,this.progress=this.currentTime/this.currentTrack.duration*100,this.currentTime>=this.currentTrack.duration&&this.nextTrack(),setTimeout(this.updateProgress,1e3))},seekTrack(a){const t=a.currentTarget,c=a.offsetX,d=t.offsetWidth,i=c/d*100;this.progress=i,this.currentTime=this.currentTrack.duration*i/100},toggleLike(){this.isLiked=!this.isLiked},toggleMute(){this.isMuted=!this.isMuted,this.volume=this.isMuted?0:80},formatTime(a){const t=Math.floor(a/60),c=Math.floor(a%60);return`${t}:${c.toString().padStart(2,"0")}`},sendMessage(){this.newMessage.trim()&&(this.messages.push({id:Date.now(),user:this.currentUser,text:this.newMessage,time:new Date().toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}),this.newMessage="",this.$nextTick(()=>{this.scrollToBottom()}))},scrollToBottom(){const a=this.$refs.chatMessages;a&&(a.scrollTop=a.scrollHeight)},addToQueue(){this.showAddTrackModal=!0},searchTracks(){if(this.searchTrack.length<2){this.searchResults=[];return}this.searchResults=[{id:4,title:"As It Was",artist:"Harry Styles",cover:"https://i.scdn.co/image/ab67616d00001e02/7c2a5b8b9c5b8b8b8b8b8b8b8b8b8b8b8b8b8b8",duration:167},{id:5,title:"Bad Habit",artist:"Steve Lacy",cover:"https://i.scdn.co/image/ab67616d00001e02/8c2a5b8b9c5b8b8b8b8b8b8b8b8b8b8b8b8b8b8",duration:189},{id:6,title:"Anti-Hero",artist:"Taylor Swift",cover:"https://i.scdn.co/image/ab67616d00001e02/9c2a5b8b9c5b8b8b8b8b8b8b8b8b8b8b8b8b8b8",duration:201}]},selectTrack(a){this.room.queue.push({...a,votes:0,addedBy:this.currentUser.id}),this.showAddTrackModal=!1,this.searchTrack="",this.searchResults=[]},voteTrack(a,t){const c=this.room.queue.find(d=>d.id===a);c&&(t==="up"?c.votes++:c.votes--,this.room.queue.sort((d,i)=>i.votes-d.votes))},removeFromQueue(a){this.room.queue=this.room.queue.filter(t=>t.id!==a)},startGame(a){alert(`ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ð¸Ð³Ñ€Ñƒ: ${a}`)},changeRoomSettings(){alert("ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹")},manageParticipants(){alert("Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ°Ð¼Ð¸")},exportPlaylist(){const a={name:this.room.name,tracks:this.room.queue.map(i=>({title:i.title,artist:i.artist,duration:i.duration}))},t=JSON.stringify(a,null,2),c="data:application/json;charset=utf-8,"+encodeURIComponent(t),d=document.createElement("a");d.setAttribute("href",c),d.setAttribute("download",`${this.room.name}_playlist.json`),d.click(),alert("ÐŸÐ»ÐµÐ¹Ð»Ð¸ÑÑ‚ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½!")},closeRoom(){confirm("Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð·Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñƒ?")&&this.$router.push("/")},startRoomUpdates(){setInterval(()=>{this.room.listeners+=Math.floor(Math.random()*3)-1,this.room.listeners<1&&(this.room.listeners=1)},1e4)},cleanupRoom(){clearInterval(this.roomUpdateInterval)},addToPlaylist(){alert("Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ñ‚Ñ€ÐµÐº Ð² Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚")}}},P={class:"music-room-view"},M={class:"room-container"},C={class:"room-sidebar"},q={class:"room-info"},w={class:"room-description"},x={class:"room-stats"},R={class:"stat"},S={class:"stat"},U={class:"stat"},L={class:"participants-list"},B={class:"participants"},A=["src"],I={class:"user-info"},V={class:"username"},G={key:0,class:"speaking-indicator"},W={class:"room-chat"},D={class:"chat-messages",ref:"chatMessages"},Q=["src"],F={class:"message-content"},H={class:"message-user"},K={class:"message-text"},N={class:"message-time"},j={class:"chat-input"},z={class:"room-main"},E={class:"current-track"},J={class:"track-cover"},O=["src"],X={class:"track-overlay"},Y={key:0,class:"track-status"},Z={key:1,class:"track-status"},$={class:"track-info"},ss={class:"track-title"},ts={class:"track-artist"},es={class:"track-progress"},is={class:"progress-time"},os={class:"track-controls"},rs={class:"volume-control"},as={class:"queue-section"},ns={class:"queue-header"},ls={class:"queue-list"},cs={class:"queue-number"},ds=["src"],us={class:"queue-info"},ms={class:"queue-duration"},hs={class:"queue-actions"},bs=["onClick"],vs={class:"vote-count"},gs=["onClick"],ps=["onClick"],ks={class:"room-features"},_s={class:"feature"},Ts={class:"games-list"},fs={class:"feature"},ys={class:"stats-grid"},Ps={class:"stat-item"},Ms={class:"stat-value"},Cs={class:"stat-item"},qs={class:"stat-value"},ws={class:"stat-item"},xs={class:"stat-value"},Rs={class:"stat-item"},Ss={class:"stat-value"},Us={key:0,class:"room-management"},Ls={class:"management-actions"},Bs={key:0,class:"modal-overlay"},As={class:"modal-content"},Is={class:"modal-header"},Vs={class:"modal-body"},Gs={key:0,class:"search-results"},Ws=["onClick"],Ds=["src"],Qs={class:"result-info"};function Fs(a,t,c,d,i,o){return l(),n("div",P,[s("div",M,[s("div",C,[s("div",q,[s("h2",null,r(i.room.name),1),s("p",w,r(i.room.description),1),s("div",x,[s("span",R,"ðŸŽ§ "+r(i.room.listeners)+" ÑÐ»ÑƒÑˆÐ°ÑŽÑ‚",1),s("span",S,"ðŸ‘¥ "+r(i.room.participants.length)+" Ð² ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ðµ",1),s("span",U,"ðŸŽµ "+r(i.room.queue.length)+" Ð² Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸",1)])]),s("div",L,[t[22]||(t[22]=s("h3",null,"Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸",-1)),s("div",B,[(l(!0),n(m,null,h(i.room.participants,e=>(l(),n("div",{key:e.id,class:"participant"},[s("img",{src:e.avatar,class:"user-avatar",alt:"Avatar"},null,8,A),s("div",I,[s("span",V,r(e.username),1),s("span",{class:k(["user-role",e.role])},r(e.role),3),e.isSpeaking?(l(),n("div",G)):u("",!0)])]))),128))])]),s("div",W,[t[23]||(t[23]=s("h3",null,"Ð§Ð°Ñ‚ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹",-1)),s("div",D,[(l(!0),n(m,null,h(i.messages,e=>(l(),n("div",{key:e.id,class:"message"},[s("img",{src:e.user.avatar,class:"message-avatar",alt:"Avatar"},null,8,Q),s("div",F,[s("span",H,r(e.user.username),1),s("span",K,r(e.text),1),s("span",N,r(e.time),1)])]))),128))],512),s("div",j,[v(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.newMessage=e),placeholder:"ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ...",onKeyup:t[1]||(t[1]=T((...e)=>o.sendMessage&&o.sendMessage(...e),["enter"]))},null,544),[[g,i.newMessage]]),s("button",{class:"send-btn",onClick:t[2]||(t[2]=(...e)=>o.sendMessage&&o.sendMessage(...e))},"ðŸ“¤")])])]),s("div",z,[s("div",E,[s("div",J,[s("img",{src:i.currentTrack.cover,alt:"Cover"},null,8,O),s("div",X,[i.isPlaying?(l(),n("span",Y,"â–¶ï¸ Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÑÑ")):(l(),n("span",Z,"â¸ï¸ ÐÐ° Ð¿Ð°ÑƒÐ·Ðµ"))])]),s("div",$,[s("h3",ss,r(i.currentTrack.title),1),s("p",ts,r(i.currentTrack.artist),1),s("div",es,[s("div",{class:"progress-bar",onClick:t[3]||(t[3]=(...e)=>o.seekTrack&&o.seekTrack(...e))},[s("div",{class:"progress-fill",style:f({width:i.progress+"%"})},null,4)]),s("div",is,[s("span",null,r(o.formatTime(i.currentTime)),1),s("span",null,r(o.formatTime(i.currentTrack.duration)),1)])]),s("div",os,[s("button",{class:"control-btn",onClick:t[4]||(t[4]=(...e)=>o.prevTrack&&o.prevTrack(...e))},"â®ï¸"),s("button",{class:"control-btn play-btn",onClick:t[5]||(t[5]=(...e)=>o.togglePlay&&o.togglePlay(...e))},r(i.isPlaying?"â¸ï¸":"â–¶ï¸"),1),s("button",{class:"control-btn",onClick:t[6]||(t[6]=(...e)=>o.nextTrack&&o.nextTrack(...e))},"â­ï¸"),s("button",{class:"control-btn",onClick:t[7]||(t[7]=(...e)=>o.toggleLike&&o.toggleLike(...e))},r(i.isLiked?"â¤ï¸":"ðŸ¤"),1),s("button",{class:"control-btn",onClick:t[8]||(t[8]=(...e)=>o.addToPlaylist&&o.addToPlaylist(...e))},"âž•"),s("div",rs,[s("button",{class:"volume-btn",onClick:t[9]||(t[9]=(...e)=>o.toggleMute&&o.toggleMute(...e))},r(i.isMuted?"ðŸ”‡":"ðŸ”Š"),1),v(s("input",{type:"range","onUpdate:modelValue":t[10]||(t[10]=e=>i.volume=e),min:"0",max:"100",class:"volume-slider"},null,512),[[g,i.volume]])])])])]),s("div",as,[s("div",ns,[t[24]||(t[24]=s("h3",null,"ðŸŽµ ÐžÑ‡ÐµÑ€ÐµÐ´ÑŒ Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ",-1)),s("button",{class:"btn btn-small",onClick:t[11]||(t[11]=(...e)=>o.addToQueue&&o.addToQueue(...e))},"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ñ€ÐµÐº")]),s("div",ls,[(l(!0),n(m,null,h(i.room.queue,(e,b)=>(l(),n("div",{key:e.id,class:k(["queue-item",{current:b===0}])},[s("div",cs,r(b+1),1),s("img",{src:e.cover,class:"queue-cover",alt:"Cover"},null,8,ds),s("div",us,[s("h4",null,r(e.title),1),s("p",null,r(e.artist),1),s("span",ms,r(o.formatTime(e.duration)),1)]),s("div",hs,[s("button",{class:"action-btn",onClick:p=>o.voteTrack(e.id,"up")},"ðŸ‘",8,bs),s("span",vs,r(e.votes),1),s("button",{class:"action-btn",onClick:p=>o.voteTrack(e.id,"down")},"ðŸ‘Ž",8,gs),i.currentUser.role==="host"||i.currentUser.id===e.addedBy?(l(),n("button",{key:0,class:"action-btn",onClick:p=>o.removeFromQueue(e.id)}," ðŸ—‘ï¸ ",8,ps)):u("",!0)])],2))),128))])]),s("div",ks,[s("div",_s,[t[25]||(t[25]=s("h3",null,"ðŸŽ® Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¸Ð³Ñ€Ñ‹",-1)),s("div",Ts,[s("button",{class:"game-btn",onClick:t[12]||(t[12]=e=>o.startGame("guess-melody"))},"Ð£Ð³Ð°Ð´Ð°Ð¹ Ð¼ÐµÐ»Ð¾Ð´Ð¸ÑŽ"),s("button",{class:"game-btn",onClick:t[13]||(t[13]=e=>o.startGame("guess-lyrics"))},"Ð£Ð³Ð°Ð´Ð°Ð¹ Ñ‚ÐµÐºÑÑ‚"),s("button",{class:"game-btn",onClick:t[14]||(t[14]=e=>o.startGame("trivia"))},"ÐœÑƒÐ·Ñ‹ÐºÐ°Ð»ÑŒÐ½Ð°Ñ Ð²Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°")])]),s("div",fs,[t[30]||(t[30]=s("h3",null,"ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹",-1)),s("div",ys,[s("div",Ps,[s("span",Ms,r(i.room.stats.totalTracks),1),t[26]||(t[26]=s("span",{class:"stat-label"},"ÐŸÑ€Ð¾Ð¸Ð³Ñ€Ð°Ð½Ð¾ Ñ‚Ñ€ÐµÐºÐ¾Ð²",-1))]),s("div",Cs,[s("span",qs,r(i.room.stats.totalTime),1),t[27]||(t[27]=s("span",{class:"stat-label"},"Ð§Ð°ÑÐ¾Ð² Ð¼ÑƒÐ·Ñ‹ÐºÐ¸",-1))]),s("div",ws,[s("span",xs,r(i.room.stats.topGenre),1),t[28]||(t[28]=s("span",{class:"stat-label"},"ÐŸÐ¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ð¹ Ð¶Ð°Ð½Ñ€",-1))]),s("div",Rs,[s("span",Ss,r(i.room.stats.activeUsers),1),t[29]||(t[29]=s("span",{class:"stat-label"},"ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… ÑÐ»ÑƒÑˆÐ°Ñ‚ÐµÐ»ÐµÐ¹",-1))])])])]),i.currentUser.role==="host"?(l(),n("div",Us,[t[31]||(t[31]=s("h3",null,"âš™ï¸ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ð¾Ð¹",-1)),s("div",Ls,[s("button",{class:"btn btn-small",onClick:t[15]||(t[15]=(...e)=>o.changeRoomSettings&&o.changeRoomSettings(...e))},"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹"),s("button",{class:"btn btn-small",onClick:t[16]||(t[16]=(...e)=>o.manageParticipants&&o.manageParticipants(...e))}," Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ°Ð¼Ð¸ "),s("button",{class:"btn btn-small",onClick:t[17]||(t[17]=(...e)=>o.exportPlaylist&&o.exportPlaylist(...e))},"Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚Ð°"),s("button",{class:"btn btn-small btn-danger",onClick:t[18]||(t[18]=(...e)=>o.closeRoom&&o.closeRoom(...e))},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñƒ")])])):u("",!0)])]),i.showAddTrackModal?(l(),n("div",Bs,[s("div",As,[s("div",Is,[t[32]||(t[32]=s("h3",null,"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ñ€ÐµÐº Ð² Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ",-1)),s("button",{class:"close-btn",onClick:t[19]||(t[19]=e=>i.showAddTrackModal=!1)},"âœ•")]),s("div",Vs,[v(s("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=e=>i.searchTrack=e),placeholder:"ÐŸÐ¾Ð¸ÑÐº Ñ‚Ñ€ÐµÐºÐ°...",onInput:t[21]||(t[21]=(...e)=>o.searchTracks&&o.searchTracks(...e))},null,544),[[g,i.searchTrack]]),i.searchResults.length?(l(),n("div",Gs,[(l(!0),n(m,null,h(i.searchResults,e=>(l(),n("div",{key:e.id,class:"search-result",onClick:b=>o.selectTrack(e)},[s("img",{src:e.cover,class:"result-cover",alt:"Cover"},null,8,Ds),s("div",Qs,[s("h4",null,r(e.title),1),s("p",null,r(e.artist),1),s("span",null,r(o.formatTime(e.duration)),1)])],8,Ws))),128))])):u("",!0)])])])):u("",!0)])}const Ks=_(y,[["render",Fs],["__scopeId","data-v-56fe1409"]]);export{Ks as default};
