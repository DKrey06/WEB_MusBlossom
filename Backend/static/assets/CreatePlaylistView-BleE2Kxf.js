import{_,c as a,a as s,h as c,v as u,y as v,t as r,F as m,r as y,f,o as n}from"./index-V0CKEUNY.js";const b={name:"CreatePlaylistView",data(){return{playlist:{name:"",description:"",cover:"",isPublic:!0},searchQuery:"",searchResults:[],selectedTracks:[],defaultCovers:["https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&h=400&fit=crop","https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=800&h=400&fit=crop","https://images.unsplash.com/photo-1518609878373-06d740f60d8b?w=800&h=400&fit=crop"]}},methods:{triggerFileUpload(){this.$refs.fileInput.click()},handleFileUpload(o){const e=o.target.files[0];if(e){const d=new FileReader;d.onload=p=>{this.playlist.cover=p.target.result},d.readAsDataURL(e)}},useDefaultCover(){const o=Math.floor(Math.random()*this.defaultCovers.length);this.playlist.cover=this.defaultCovers[o]},searchTracks(){if(this.searchQuery.length<2){this.searchResults=[];return}this.searchResults=[{id:1,title:"Blinding Lights",artist:"The Weeknd",album:"After Hours",cover:"https://i.scdn.co/image/ab67616d00001e02/86a0f12c8d1c65b6e6c8b1a0f2c5e8b1d5b3a8f2",duration:2e5},{id:2,title:"Levitating",artist:"Dua Lipa",album:"Future Nostalgia",cover:"https://i.scdn.co/image/ab67616d00001e02/f2b8b5b5f5b5f5b5f5b5f5b5f5b5f5b5f5b5f5b5",duration:203e3}]},addTrack(o){this.isTrackAdded(o.id)||this.selectedTracks.push(o)},removeTrack(o){this.selectedTracks=this.selectedTracks.filter(e=>e.id!==o)},isTrackAdded(o){return this.selectedTracks.some(e=>e.id===o)},formatDuration(o){const e=Math.floor(o/6e4),d=(o%6e4/1e3).toFixed(0);return`${e}:${d.padStart(2,"0")}`},resetForm(){this.playlist={name:"",description:"",cover:"",isPublic:!0},this.selectedTracks=[],this.searchResults=[],this.searchQuery=""},async createPlaylist(){try{const o=localStorage.getItem("access_token"),d=await(await fetch("http://localhost:5000/api/playlists",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({name:this.playlist.name,description:this.playlist.description,is_public:this.playlist.isPublic})})).json();d.success?(alert("Плейлист успешно создан!"),this.$router.push(`/playlists/${d.playlist.id}`)):alert("Ошибка: "+d.error)}catch(o){console.error("Error creating playlist:",o),alert("Ошибка создания плейлиста")}}}},g={class:"create-playlist-view"},k={class:"create-container"},T={class:"playlist-form"},C={class:"form-section"},w={class:"form-group"},F={class:"form-group"},P={class:"form-group"},U={class:"cover-upload"},D=["src"],R={key:1,class:"cover-placeholder"},x={class:"cover-options"},V={class:"form-group"},A={class:"privacy-options"},I={class:"radio-option"},B={class:"radio-option"},L={class:"form-section"},M={class:"search-tracks"},Q={key:0,class:"search-results"},S={class:"results-header"},N={class:"tracks-list"},j=["src","alt"],E={class:"track-info"},O={class:"track-title"},z={class:"track-artist"},H={class:"track-album"},J={class:"track-duration"},W=["onClick","disabled"],q={key:1,class:"selected-tracks"},G={class:"selected-list"},K={class:"track-number"},X=["src","alt"],Y={class:"track-info"},Z={class:"track-title"},$={class:"track-artist"},ss={class:"track-duration"},es=["onClick"],ts={class:"playlist-preview"},ls={class:"preview-card"},is={class:"preview-cover"},os=["src"],rs={key:1,class:"preview-placeholder"},as={class:"preview-info"},ns={class:"preview-description"},ds={class:"preview-meta"},cs={class:"meta-item"},us={class:"meta-item"},ps={class:"preview-actions"},hs=["disabled"];function vs(o,e,d,p,l,i){return n(),a("div",g,[e[24]||(e[24]=s("div",{class:"create-header"},[s("h1",null,"Создать новый плейлист"),s("p",null,"Соберите свою коллекцию любимых треков")],-1)),s("div",k,[s("div",T,[s("div",C,[e[21]||(e[21]=s("h2",null,"Основная информация",-1)),s("div",w,[e[12]||(e[12]=s("label",{for:"playlist-name"},"Название плейлиста",-1)),c(s("input",{type:"text",id:"playlist-name","onUpdate:modelValue":e[0]||(e[0]=t=>l.playlist.name=t),placeholder:"Например: 'Лучшие треки 2024'"},null,512),[[u,l.playlist.name]])]),s("div",F,[e[13]||(e[13]=s("label",{for:"playlist-description"},"Описание",-1)),c(s("textarea",{id:"playlist-description","onUpdate:modelValue":e[1]||(e[1]=t=>l.playlist.description=t),placeholder:"Расскажите о вашем плейлисте...",rows:"4"},null,512),[[u,l.playlist.description]])]),s("div",P,[e[15]||(e[15]=s("label",null,"Обложка плейлиста",-1)),s("div",U,[s("div",{class:"cover-preview",onClick:e[3]||(e[3]=(...t)=>i.triggerFileUpload&&i.triggerFileUpload(...t))},[l.playlist.cover?(n(),a("img",{key:0,src:l.playlist.cover,alt:"Cover"},null,8,D)):(n(),a("div",R,[...e[14]||(e[14]=[s("span",null,"+",-1),s("p",null,"Загрузить обложку",-1)])])),s("input",{type:"file",ref:"fileInput",onChange:e[2]||(e[2]=(...t)=>i.handleFileUpload&&i.handleFileUpload(...t)),accept:"image/*",hidden:""},null,544)]),s("div",x,[s("button",{type:"button",onClick:e[4]||(e[4]=(...t)=>i.triggerFileUpload&&i.triggerFileUpload(...t))},"Загрузить"),s("button",{type:"button",onClick:e[5]||(e[5]=(...t)=>i.useDefaultCover&&i.useDefaultCover(...t))},"Использовать шаблон")])])]),s("div",V,[e[20]||(e[20]=s("label",null,"Настройки приватности",-1)),s("div",A,[s("label",I,[c(s("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=t=>l.playlist.isPublic=t),value:!0},null,512),[[v,l.playlist.isPublic]]),e[16]||(e[16]=s("span",null,"Публичный",-1)),e[17]||(e[17]=s("small",null,"Виден всем пользователям",-1))]),s("label",B,[c(s("input",{type:"radio","onUpdate:modelValue":e[7]||(e[7]=t=>l.playlist.isPublic=t),value:!1},null,512),[[v,l.playlist.isPublic]]),e[18]||(e[18]=s("span",null,"Приватный",-1)),e[19]||(e[19]=s("small",null,"Только для вас",-1))])])])]),s("div",L,[e[23]||(e[23]=s("h2",null,"Добавить треки",-1)),s("div",M,[c(s("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>l.searchQuery=t),placeholder:"Поиск треков...",onInput:e[9]||(e[9]=(...t)=>i.searchTracks&&i.searchTracks(...t))},null,544),[[u,l.searchQuery]])]),l.searchResults.length?(n(),a("div",Q,[s("div",S,[e[22]||(e[22]=s("span",null,"Найденные треки",-1)),s("span",null,r(l.searchResults.length)+" результатов",1)]),s("div",N,[(n(!0),a(m,null,y(l.searchResults,t=>(n(),a("div",{key:t.id,class:"track-item"},[s("img",{src:t.cover,alt:t.title,class:"track-cover"},null,8,j),s("div",E,[s("span",O,r(t.title),1),s("span",z,r(t.artist),1),s("span",H,r(t.album),1)]),s("span",J,r(i.formatDuration(t.duration)),1),s("button",{class:"add-btn",onClick:h=>i.addTrack(t),disabled:i.isTrackAdded(t.id)},r(i.isTrackAdded(t.id)?"✓":"+"),9,W)]))),128))])])):f("",!0),l.selectedTracks.length?(n(),a("div",q,[s("h3",null,"Добавленные треки ("+r(l.selectedTracks.length)+")",1),s("div",G,[(n(!0),a(m,null,y(l.selectedTracks,(t,h)=>(n(),a("div",{key:t.id,class:"selected-item"},[s("span",K,r(h+1),1),s("img",{src:t.cover,alt:t.title,class:"track-cover"},null,8,X),s("div",Y,[s("span",Z,r(t.title),1),s("span",$,r(t.artist),1)]),s("span",ss,r(i.formatDuration(t.duration)),1),s("button",{class:"remove-btn",onClick:ms=>i.removeTrack(t.id)},"×",8,es)]))),128))])])):f("",!0)])]),s("div",ts,[s("div",ls,[s("div",is,[l.playlist.cover?(n(),a("img",{key:0,src:l.playlist.cover,alt:"Cover"},null,8,os)):(n(),a("div",rs))]),s("div",as,[s("h3",null,r(l.playlist.name||"Новый плейлист"),1),s("p",ns,r(l.playlist.description||"Описание отсутствует"),1),s("div",ds,[s("span",cs,r(l.selectedTracks.length)+" треков",1),s("span",us,r(l.playlist.isPublic?"Публичный":"Приватный"),1)])])]),s("div",ps,[s("button",{class:"btn btn-secondary",onClick:e[10]||(e[10]=(...t)=>i.resetForm&&i.resetForm(...t))},"Сбросить"),s("button",{class:"btn btn-primary",onClick:e[11]||(e[11]=(...t)=>i.createPlaylist&&i.createPlaylist(...t)),disabled:!l.playlist.name||l.selectedTracks.length===0}," Создать плейлист ",8,hs)])])])])}const fs=_(b,[["render",vs],["__scopeId","data-v-10e14e28"]]);export{fs as default};
