import{_ as k,c,a as t,i as h,v as g,x as P,w as b,g as u,s as w,F as y,r as v,t as r,f,l as p,e as C,o as n,h as _,n as F}from"./index-CAI9DG47.js";const x={name:"PlaylistsView",data(){return{loading:!0,playlists:[],featuredPlaylists:[],searchQuery:"",showFilters:!1,sortBy:"newest",selectedGenres:[],trackCount:1,viewMode:"grid",currentPage:1,itemsPerPage:12,availableGenres:["–†–æ–∫","–ü–æ–ø","–•–∏–ø-—Ö–æ–ø","–î–∂–∞–∑","–ö–ª–∞—Å—Å–∏–∫–∞","–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞","–ò–Ω–¥–∏","–ú–µ—Ç–∞–ª","–§–æ–ª–∫","R&B"],defaultCover:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&h=400&fit=crop",defaultAvatar:"https://i.pravatar.cc/150",isAuthenticated:localStorage.getItem("access_token")!==null}},computed:{filteredPlaylists(){let l=[...this.playlists];if(this.searchQuery){const s=this.searchQuery.toLowerCase();l=l.filter(o=>o.name.toLowerCase().includes(s)||o.description&&o.description.toLowerCase().includes(s))}switch(this.sortBy){case"newest":l.sort((s,o)=>new Date(o.created_at)-new Date(s.created_at));break;case"popular":l.sort((s,o)=>(o.plays_count||0)-(s.plays_count||0));break;case"tracks":l.sort((s,o)=>(o.tracks_count||0)-(s.tracks_count||0));break;case"alphabetical":l.sort((s,o)=>s.name.localeCompare(o.name));break}return l=l.filter(s=>(s.tracks_count||0)>=this.trackCount),l},paginatedPlaylists(){const l=(this.currentPage-1)*this.itemsPerPage,s=l+this.itemsPerPage;return this.filteredPlaylists.slice(l,s)},totalPages(){return Math.ceil(this.filteredPlaylists.length/this.itemsPerPage)}},async mounted(){await this.loadPlaylists()},methods:{async loadPlaylists(){this.loading=!0;try{const s=await(await fetch("http://localhost:5000/api/playlists")).json();s.success&&(this.playlists=s.playlists,this.featuredPlaylists=s.playlists.slice(0,3))}catch(l){console.error("Error loading playlists:",l),this.playlists=this.getMockPlaylists(),this.featuredPlaylists=this.playlists.slice(0,3)}finally{this.loading=!1}},getMockPlaylists(){return[{id:1,name:"–õ—É—á—à–∏–µ —Ö–∏—Ç—ã 2023",description:"–°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç—Ä–µ–∫–∏ —ç—Ç–æ–≥–æ –≥–æ–¥–∞",cover_url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&h=400&fit=crop",tracks_count:25,plays_count:1245,created_at:"2023-10-15T10:30:00",creator:{username:"musiclover",avatar:"https://i.pravatar.cc/150?img=1"}},{id:2,name:"–†–æ–∫ –∫–ª–∞—Å—Å–∏–∫–∞",description:"–í–µ—á–Ω–∞—è –∫–ª–∞—Å—Å–∏–∫–∞ —Ä–æ–∫-–º—É–∑—ã–∫–∏",cover_url:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=800&h=400&fit=crop",tracks_count:30,plays_count:895,created_at:"2023-10-10T14:20:00",creator:{username:"rockfan",avatar:"https://i.pravatar.cc/150?img=2"}}]},searchPlaylists(){clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.currentPage=1},300)},toggleFilters(){this.showFilters=!this.showFilters},toggleGenre(l){const s=this.selectedGenres.indexOf(l);s===-1?this.selectedGenres.push(l):this.selectedGenres.splice(s,1)},applyFilters(){this.currentPage=1,this.showFilters=!1},resetFilters(){this.searchQuery="",this.sortBy="newest",this.selectedGenres=[],this.trackCount=1,this.currentPage=1,this.showFilters=!1},formatDate(l){return new Date(l).toLocaleDateString("ru-RU",{day:"numeric",month:"short"})},playPlaylist(l){console.log("Playing playlist:",l.name)},savePlaylist(l){const s=JSON.parse(localStorage.getItem("saved_playlists")||"[]");s.find(o=>o.id===l.id)?alert("–ü–ª–µ–π–ª–∏—Å—Ç —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω"):(s.push(l),localStorage.setItem("saved_playlists",JSON.stringify(s)),alert("–ü–ª–µ–π–ª–∏—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω"))},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}}},M={class:"playlists-view"},B={class:"playlists-controls"},G={class:"controls-top"},S={class:"search-filter"},D={key:0,class:"filters-panel"},T={class:"filter-group"},V={class:"filter-group"},I={class:"genres-selector"},Q=["onClick"],L={class:"filter-group"},N={class:"range-slider"},A={class:"filter-actions"},U={key:0,class:"loading"},O={key:1,class:"playlists-content"},z={class:"content-header"},E={class:"count"},J={class:"view-options"},R=["onClick"],j={class:"playlist-cover"},q=["src","alt"],H={class:"playlist-overlay"},K={class:"track-count"},W={class:"play-count"},X={class:"playlist-info"},Y={class:"playlist-description"},Z={class:"playlist-meta"},$={class:"creator-info"},ss=["src","alt"],ts={class:"playlist-date"},es={class:"playlist-actions"},ls=["onClick"],is=["onClick"],as={key:1,class:"no-playlists"},rs={key:2,class:"pagination"},ns=["disabled"],os={class:"page-info"},cs=["disabled"],ds={key:2,class:"featured-playlists"},us={class:"featured-slider"},ps=["onClick"],hs={class:"featured-content"},ys={class:"featured-description"},vs={class:"featured-stats"};function gs(l,s,o,fs,a,i){const m=C("router-link");return n(),c("div",M,[s[25]||(s[25]=t("div",{class:"playlists-header"},[t("h1",null,"–ü–ª–µ–π–ª–∏—Å—Ç—ã"),t("p",null,"–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞")],-1)),t("div",B,[t("div",G,[t("div",S,[h(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>a.searchQuery=e),placeholder:"–ü–æ–∏—Å–∫ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤...",onInput:s[1]||(s[1]=(...e)=>i.searchPlaylists&&i.searchPlaylists(...e))},null,544),[[g,a.searchQuery]]),t("button",{class:"filter-btn",onClick:s[2]||(s[2]=(...e)=>i.toggleFilters&&i.toggleFilters(...e))},"–§–∏–ª—å—Ç—Ä—ã")]),a.isAuthenticated?(n(),P(m,{key:0,to:"/create-playlist",class:"create-btn"},{default:b(()=>[...s[13]||(s[13]=[f(" –°–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç ",-1)])]),_:1})):u("",!0)]),a.showFilters?(n(),c("div",D,[t("div",T,[s[15]||(s[15]=t("label",null,"–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:",-1)),h(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>a.sortBy=e)},[...s[14]||(s[14]=[t("option",{value:"newest"},"–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ",-1),t("option",{value:"popular"},"–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏",-1),t("option",{value:"tracks"},"–ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ç—Ä–µ–∫–æ–≤",-1),t("option",{value:"alphabetical"},"–ü–æ –∞–ª—Ñ–∞–≤–∏—Ç—É",-1)])],512),[[w,a.sortBy]])]),t("div",V,[s[16]||(s[16]=t("label",null,"–ñ–∞–Ω—Ä—ã:",-1)),t("div",I,[(n(!0),c(y,null,v(a.availableGenres,e=>(n(),c("span",{key:e,class:p([{selected:a.selectedGenres.includes(e)},"genre-tag"]),onClick:d=>i.toggleGenre(e)},r(e),11,Q))),128))])]),t("div",L,[s[17]||(s[17]=t("label",null,"–î–ª–∏–Ω–∞:",-1)),t("div",N,[h(t("input",{type:"range","onUpdate:modelValue":s[4]||(s[4]=e=>a.trackCount=e),min:"1",max:"100",onChange:s[5]||(s[5]=(...e)=>i.applyFilters&&i.applyFilters(...e))},null,544),[[g,a.trackCount]]),t("span",null,r(a.trackCount)+"+ —Ç—Ä–µ–∫–æ–≤",1)])]),t("div",A,[t("button",{class:"btn btn-secondary",onClick:s[6]||(s[6]=(...e)=>i.resetFilters&&i.resetFilters(...e))},"–°–±—Ä–æ—Å–∏—Ç—å"),t("button",{class:"btn btn-primary",onClick:s[7]||(s[7]=(...e)=>i.applyFilters&&i.applyFilters(...e))},"–ü—Ä–∏–º–µ–Ω–∏—Ç—å")])])):u("",!0)]),a.loading?(n(),c("div",U,[...s[18]||(s[18]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤...",-1)])])):(n(),c("div",O,[t("div",z,[t("h2",null,[s[19]||(s[19]=f(" –í—Å–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã ",-1)),t("span",E,"("+r(i.filteredPlaylists.length)+")",1)]),t("div",J,[t("button",{class:p({active:a.viewMode==="grid"}),onClick:s[8]||(s[8]=e=>a.viewMode="grid")},"–°–µ—Ç–∫–∞",2),t("button",{class:p({active:a.viewMode==="list"}),onClick:s[9]||(s[9]=e=>a.viewMode="list")}," –°–ø–∏—Å–æ–∫ ",2)])]),i.filteredPlaylists.length?(n(),c("div",{key:0,class:p(["playlists-container",a.viewMode])},[(n(!0),c(y,null,v(i.filteredPlaylists,e=>(n(),c("div",{key:e.id,class:"playlist-card",onClick:d=>l.$router.push(`/playlists/${e.id}`)},[t("div",j,[t("img",{src:e.cover_url||a.defaultCover,alt:e.name},null,8,q),t("div",H,[t("span",K,r(e.tracks_count||0)+" —Ç—Ä–µ–∫–æ–≤",1),t("span",W,r(e.plays_count||0)+" –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–π",1)])]),t("div",X,[t("h3",null,r(e.name),1),t("p",Y,r(e.description||"–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è"),1),t("div",Z,[t("div",$,[t("img",{src:e.creator.avatar||a.defaultAvatar,alt:e.creator.username},null,8,ss),t("span",null,r(e.creator.username),1)]),t("span",ts,r(i.formatDate(e.created_at)),1)]),t("div",es,[t("button",{class:"action-btn",onClick:_(d=>i.playPlaylist(e),["stop"])},"–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏",8,ls),t("button",{class:"action-btn",onClick:_(d=>i.savePlaylist(e),["stop"])},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",8,is)])])],8,R))),128))],2)):(n(),c("div",as,[s[20]||(s[20]=t("div",{class:"empty-icon"},"üéß",-1)),s[21]||(s[21]=t("h3",null,"–ü–ª–µ–π–ª–∏—Å—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)),s[22]||(s[22]=t("p",null,"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞",-1)),t("button",{class:"btn btn-secondary",onClick:s[10]||(s[10]=(...e)=>i.resetFilters&&i.resetFilters(...e))},"–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã")])),i.filteredPlaylists.length>0?(n(),c("div",rs,[t("button",{disabled:a.currentPage===1,onClick:s[11]||(s[11]=(...e)=>i.prevPage&&i.prevPage(...e)),class:"pagination-btn"}," ‚Üê –ù–∞–∑–∞–¥ ",8,ns),t("span",os," –°—Ç—Ä–∞–Ω–∏—Ü–∞ "+r(a.currentPage)+" –∏–∑ "+r(i.totalPages),1),t("button",{disabled:a.currentPage===i.totalPages,onClick:s[12]||(s[12]=(...e)=>i.nextPage&&i.nextPage(...e)),class:"pagination-btn"}," –í–ø–µ—Ä–µ–¥ ‚Üí ",8,cs)])):u("",!0)])),a.featuredPlaylists.length?(n(),c("div",ds,[s[24]||(s[24]=t("h2",null,"–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã",-1)),t("div",us,[(n(!0),c(y,null,v(a.featuredPlaylists,e=>(n(),c("div",{key:e.id,class:"featured-card",style:F({backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(${e.cover_url||a.defaultCover})`}),onClick:d=>l.$router.push(`/playlists/${e.id}`)},[t("div",hs,[t("h3",null,r(e.name),1),t("p",ys,r(e.description),1),t("div",vs,[t("span",null,r(e.tracks_count)+" —Ç—Ä–µ–∫–æ–≤",1),t("span",null,r(e.plays_count)+" –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–π",1)]),s[23]||(s[23]=t("button",{class:"btn btn-primary"},"–°–ª—É—à–∞—Ç—å",-1))])],12,ps))),128))])])):u("",!0)])}const ms=k(x,[["render",gs],["__scopeId","data-v-113b11f5"]]);export{ms as default};
